var formClick=document.querySelector(".btn-write"),popup=document.querySelector(".contact-us"),close=popup.querySelector(".modal-close"),form=popup.querySelector(".contact-us-form"),yourname=popup.querySelector("[name=yourname]"),email=popup.querySelector("[name=email]"),comment=popup.querySelector("[name=comment]"),isStorageSupport=!0,namestorage="",emailstorage="",focused=!1;try{namestorage=localStorage.getItem("yourname"),emailstorage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}formClick.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show","js-popup"),namestorage?(yourname.value=namestorage,email.focus()):(yourname.focus(),focused=!0),focused||(emailstorage?(email.value=emailstorage,comment.focus()):email.focus())}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show","js-error")}),form.addEventListener("submit",function(e){yourname.value&&email.value&&comment.value?isStorageSupport&&(localStorage.setItem("yourname",yourname.value),localStorage.setItem("email",email.value),localStorage.setItem("comment",comment.value)):(e.preventDefault(),popup.classList.remove("js-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("js-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-show")&&popup.classList.remove("modal-show","js-error"))});var mapLink=document.querySelector(".button-map"),mapPopup=document.querySelector(".modal-map"),mapClose=mapPopup.querySelector(".modal-close");mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-show","js-popup")}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),mapPopup.classList.contains("modal-show")&&mapPopup.classList.remove("modal-show"))});